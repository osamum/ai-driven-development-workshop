-- 工場設備管理システム - トランザクションデータ INSERT文
-- 作成日: 2024-03-15
-- 説明: センサーデータ、アラート、保全作業等のトランザクションデータの投入スクリプト

-- センサーデータ（基本センサー設定）
INSERT INTO Sensor (sensor_id, equipment_id, sensor_name, sensor_type, measurement_unit, min_value, max_value, normal_min, normal_max, status, created_at, updated_at) VALUES
(1, 1, '主軸温度センサー', '温度', '℃', -10.0, 150.0, 20.0, 80.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(2, 1, '主軸振動センサー', '振動', 'mm/s', 0.0, 50.0, 0.0, 5.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(3, 1, '切削油圧力センサー', '圧力', 'MPa', 0.0, 10.0, 3.0, 8.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(4, 1, '主軸モーター電流センサー', '電流', 'A', 0.0, 100.0, 10.0, 85.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(5, 1, '主軸回転数センサー', '回転数', 'rpm', 0.0, 8000.0, 100.0, 6000.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(6, 2, '主軸温度センサー', '温度', '℃', -10.0, 150.0, 20.0, 80.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(7, 2, '主軸振動センサー', '振動', 'mm/s', 0.0, 50.0, 0.0, 5.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(8, 3, '砥石温度センサー', '温度', '℃', -10.0, 200.0, 25.0, 120.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(9, 3, '研削盤振動センサー', '振動', 'mm/s', 0.0, 40.0, 0.0, 4.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(10, 4, '主軸温度センサー', '温度', '℃', -10.0, 150.0, 20.0, 75.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(11, 4, 'チャック圧力センサー', '圧力', 'MPa', 0.0, 5.0, 2.0, 4.5, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(12, 5, '主軸温度センサー', '温度', '℃', -10.0, 150.0, 20.0, 75.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(13, 6, 'ドリル温度センサー', '温度', '℃', -10.0, 100.0, 20.0, 60.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(14, 7, 'プレス圧力センサー', '圧力', 'kN', 0.0, 8000.0, 500.0, 7500.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(15, 7, 'プレス機振動センサー', '振動', 'mm/s', 0.0, 30.0, 0.0, 8.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(16, 8, '溶接電流センサー', '電流', 'A', 0.0, 500.0, 50.0, 400.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(17, 8, '溶接部温度センサー', '温度', '℃', 0.0, 1500.0, 800.0, 1200.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(18, 9, '塗装ブース温度センサー', '温度', '℃', 0.0, 80.0, 20.0, 60.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(19, 9, '塗装ブース湿度センサー', '湿度', '%RH', 0.0, 100.0, 40.0, 70.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(20, 10, '測定機温度センサー', '温度', '℃', 15.0, 30.0, 20.0, 25.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(21, 11, '圧縮機圧力センサー', '圧力', 'MPa', 0.0, 1.0, 0.6, 0.9, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(22, 11, '圧縮機温度センサー', '温度', '℃', 0.0, 100.0, 30.0, 80.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(23, 12, '冷却水温度センサー', '温度', '℃', 0.0, 50.0, 10.0, 25.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00'),
(24, 12, '冷却水流量センサー', '流量', 'L/min', 0.0, 1000.0, 200.0, 800.0, '正常', '2024-01-15 09:00:00', '2024-03-01 10:30:00');

-- 設備状態データ
INSERT INTO EquipmentStatus (status_id, equipment_id, operational_status, availability_rate, performance_rate, quality_rate, oee_rate, status_timestamp, created_at) VALUES
(1, 1, '稼働中', 92.5, 88.2, 96.8, 79.0, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(2, 2, '稼働中', 89.3, 91.7, 94.5, 77.3, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(3, 3, '稼働中', 95.1, 86.4, 98.2, 80.6, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(4, 4, '稼働中', 87.9, 93.2, 92.8, 76.1, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(5, 5, '稼働中', 91.8, 89.5, 95.7, 78.6, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(6, 6, '稼働中', 94.2, 84.3, 97.1, 77.1, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(7, 7, '稼働中', 88.7, 92.8, 93.4, 76.8, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(8, 8, '稼働中', 90.5, 87.9, 96.3, 76.6, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(9, 9, '稼働中', 93.6, 85.7, 94.8, 76.1, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(10, 10, '稼働中', 96.8, 91.2, 99.1, 87.5, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(11, 11, '稼働中', 98.2, 95.4, 99.8, 93.5, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(12, 12, '稼働中', 97.1, 92.8, 99.5, 89.7, '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(13, 1, 'アラート', 92.5, 88.2, 96.8, 79.0, '2024-03-15 10:15:00', '2024-03-15 10:15:00');

-- アラートデータ
INSERT INTO Alert (alert_id, equipment_id, sensor_id, alert_type_id, assigned_user_id, title, description, severity, status, detected_at, acknowledged_at, resolved_at, created_at, updated_at) VALUES
(1, 1, 2, 2, 2, 'CNCフライス盤#1 振動異常検知', '主軸振動センサーの測定値が正常範囲（0.0-5.0 mm/s）を超過しました。測定値: 7.2 mm/s', '中', '未対応', '2024-03-15 09:32:00', NULL, NULL, '2024-03-15 09:32:00', '2024-03-15 09:32:00'),
(2, 1, 1, 1, 2, 'CNCフライス盤#1 高温異常検知', '主軸温度センサーの測定値が正常範囲（20.0-80.0℃）を超過しました。測定値: 85.3℃', '高', '対応中', '2024-03-15 10:15:00', '2024-03-15 10:17:00', NULL, '2024-03-15 10:15:00', '2024-03-15 10:17:00'),
(3, 3, NULL, 6, 4, '研削盤#1 故障予兆検知', 'AI分析により研削盤#1に故障予兆が検出されました。予測される故障時期: 2024年3月25日頃', '中', '未対応', '2024-03-14 14:30:00', NULL, NULL, '2024-03-14 14:30:00', '2024-03-14 14:30:00'),
(4, 7, NULL, 7, 5, 'プレス機#1 定期保全期限', 'プレス機#1の定期保全作業期限が近づいています。予定日: 2024年3月18日', '低', '計画済み', '2024-03-13 08:00:00', '2024-03-13 09:15:00', NULL, '2024-03-13 08:00:00', '2024-03-13 09:15:00'),
(5, 11, 21, 3, 6, 'コンプレッサー#1 圧力低下', '圧縮機圧力センサーの測定値が正常範囲下限を下回りました。測定値: 0.55 MPa', '高', '解決済み', '2024-03-12 16:45:00', '2024-03-12 17:00:00', '2024-03-12 18:30:00', '2024-03-12 16:45:00', '2024-03-12 18:30:00'),
(6, 4, NULL, 10, 8, 'NC旋盤#1 性能低下', '設備の稼働効率が基準値を下回っています。OEE率: 72.5%（基準: 75%以上）', '低', '対応中', '2024-03-14 11:20:00', '2024-03-14 13:45:00', NULL, '2024-03-14 11:20:00', '2024-03-14 13:45:00');

-- 保全計画データ
INSERT INTO MaintenancePlan (plan_id, equipment_id, maintenance_type_id, assigned_user_id, plan_name, description, scheduled_start, scheduled_end, estimated_duration_hours, priority, status, created_at, updated_at) VALUES
(1, 1, 1, 4, 'CNCフライス盤#1 月次定期点検', '主軸ベアリング点検、切削油交換、精度測定、清掃作業', '2024-03-20 08:00:00', '2024-03-20 12:00:00', 4, '中', '計画済み', '2024-03-10 10:00:00', '2024-03-10 10:00:00'),
(2, 3, 2, 5, '研削盤#1 予知保全対応', 'AI分析による故障予兆に対する予防的保全作業。砥石台ベアリング交換、精度調整', '2024-03-22 06:00:00', '2024-03-22 14:00:00', 8, '高', '計画済み', '2024-03-14 15:00:00', '2024-03-14 15:00:00'),
(3, 7, 1, 6, 'プレス機#1 定期点検', '油圧システム点検、金型クリアランス調整、安全装置動作確認', '2024-03-18 07:00:00', '2024-03-18 11:00:00', 4, '中', '承認済み', '2024-03-13 09:30:00', '2024-03-13 14:20:00'),
(4, 2, 4, 4, 'CNCフライス盤#2 主軸ベアリング交換', '主軸ベアリングの予防的交換作業。使用時間8000時間到達による計画交換', '2024-03-25 06:00:00', '2024-03-25 12:00:00', 6, '中', '計画済み', '2024-03-12 11:15:00', '2024-03-12 11:15:00'),
(5, 11, 3, 6, 'コンプレッサー#1 緊急修理', '圧力低下による緊急修理。エアフィルター交換、圧力センサー校正', '2024-03-12 17:30:00', '2024-03-12 19:30:00', 2, '緊急', '完了', '2024-03-12 17:00:00', '2024-03-12 19:45:00'),
(6, 8, 6, 5, '溶接装置#1 校正作業', '溶接電流・電圧の校正、温度センサーキャリブレーション', '2024-03-19 13:00:00', '2024-03-19 16:00:00', 3, '低', '計画済み', '2024-03-11 16:00:00', '2024-03-11 16:00:00'),
(7, 10, 5, 4, '三次元測定機#1 年次オーバーホール', '測定機の全面的なオーバーホール。精度校正、エアベアリング点検、制御系更新', '2024-04-01 06:00:00', '2024-04-03 18:00:00', 48, '高', '計画済み', '2024-03-05 14:00:00', '2024-03-05 14:00:00');

-- 保全作業データ
INSERT INTO MaintenanceWork (work_id, plan_id, equipment_id, technician_id, actual_start, actual_end, actual_duration_hours, work_description, findings, status, cost, created_at, updated_at) VALUES
(1, 5, 11, 6, '2024-03-12 17:30:00', '2024-03-12 19:15:00', 2, 'コンプレッサー#1の緊急修理作業を実施。エアフィルター交換、圧力センサー校正、配管点検を行った。', 'エアフィルターの詰まりが圧力低下の主要因であった。フィルター交換後、正常圧力（0.8MPa）に復旧。圧力センサーは校正により正常動作を確認。', '完了', 12500.0, '2024-03-12 17:30:00', '2024-03-12 19:45:00'),
(2, NULL, 4, 5, '2024-03-10 10:00:00', '2024-03-10 13:30:00', 4, 'NC旋盤#1の切削工具交換と精度調整作業。ドリルビット3本、バイト2本を交換し、主軸の芯出し調整を実施。', '切削工具の摩耗が進行していたため、加工精度に影響が出ていた。工具交換後、寸法精度が±0.02mmから±0.005mmに改善。', '完了', 8750.0, '2024-03-10 10:00:00', '2024-03-10 14:00:00'),
(3, NULL, 1, 4, '2024-03-08 14:00:00', '2024-03-08 16:30:00', 3, 'CNCフライス盤#1の切削油システム清掃と油交換作業。タンク清掃、フィルター交換、新油20L補充。', '切削油の劣化と金属粉の蓄積を確認。清掃と油交換により、切削性能と表面仕上げ品質が向上。', '完了', 15200.0, '2024-03-08 14:00:00', '2024-03-08 17:00:00'),
(4, NULL, 9, 6, '2024-03-07 09:00:00', '2024-03-07 11:00:00', 2, '塗装ブース#1のフィルター交換と清掃作業。給気フィルター、排気フィルターを交換し、内部清掃を実施。', 'フィルターの目詰まりにより風量が低下していた。交換後、規定風量（600m³/h）に復旧。塗装品質の安定化が期待される。', '完了', 6800.0, '2024-03-07 09:00:00', '2024-03-07 11:30:00'),
(5, NULL, 2, 4, '2024-03-05 15:00:00', '2024-03-05 17:45:00', 3, 'CNCフライス盤#2の振動測定と調整作業。主軸バランス調整、ベッド水平度確認、防振パッド交換を実施。', '主軸の不釣り合いが振動の原因であった。バランス調整により振動レベルが3.2mm/sから1.8mm/sに低減。', '完了', 4500.0, '2024-03-05 15:00:00', '2024-03-05 18:00:00');

-- 予測モデルデータ
INSERT INTO PredictiveModel (model_id, equipment_id, model_name, model_type, model_parameters, accuracy, trained_at, last_prediction_at, status, created_at, updated_at) VALUES
(1, 1, 'CNCフライス盤温度予測モデル', '時系列予測', '{"algorithm": "LSTM", "layers": 3, "neurons": [64, 32, 16], "learning_rate": 0.001, "batch_size": 32}', 92.5, '2024-03-01 10:00:00', '2024-03-15 10:15:00', 'アクティブ', '2024-02-15 09:00:00', '2024-03-15 10:15:00'),
(2, 1, 'CNCフライス盤振動異常検知モデル', '異常検知', '{"algorithm": "AutoEncoder", "encoder_layers": [24, 12, 6], "decoder_layers": [6, 12, 24], "threshold": 0.85}', 89.2, '2024-02-28 14:30:00', '2024-03-15 09:32:00', 'アクティブ', '2024-02-10 11:00:00', '2024-03-15 09:32:00'),
(3, 3, '研削盤故障予測モデル', '分類', '{"algorithm": "RandomForest", "n_estimators": 100, "max_depth": 10, "features": ["temperature", "vibration", "power", "runtime"]}', 87.8, '2024-02-25 16:00:00', '2024-03-14 14:30:00', 'アクティブ', '2024-02-05 13:00:00', '2024-03-14 14:30:00'),
(4, 7, 'プレス機性能予測モデル', '回帰', '{"algorithm": "XGBoost", "n_estimators": 200, "learning_rate": 0.1, "max_depth": 6, "subsample": 0.8}', 91.3, '2024-03-03 12:00:00', '2024-03-15 08:00:00', 'アクティブ', '2024-02-20 10:00:00', '2024-03-15 08:00:00'),
(5, 11, 'コンプレッサー圧力異常検知モデル', '異常検知', '{"algorithm": "IsolationForest", "contamination": 0.05, "max_samples": 256, "max_features": 4}', 94.7, '2024-02-20 09:00:00', '2024-03-12 16:45:00', 'アクティブ', '2024-02-01 15:00:00', '2024-03-12 16:45:00');

-- KPI指標データ
INSERT INTO KPIMetrics (metric_id, equipment_id, metric_name, metric_value, unit, measurement_timestamp, created_at) VALUES
(1, 1, 'OEE', 79.0, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(2, 1, '稼働率', 92.5, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(3, 1, '性能率', 88.2, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(4, 1, '品質率', 96.8, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(5, 1, 'MTBF', 720.0, '時間', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(6, 1, 'MTTR', 2.5, '時間', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(7, 2, 'OEE', 77.3, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(8, 3, 'OEE', 80.6, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(9, 4, 'OEE', 76.1, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(10, 7, '生産効率', 85.3, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(11, 7, 'エネルギー効率', 78.9, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(12, 10, '測定精度', 99.8, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(13, 11, 'エネルギー効率', 92.1, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00'),
(14, 12, '冷却効率', 88.7, '%', '2024-03-15 09:30:00', '2024-03-15 09:30:00');

-- 分析レポートデータ
INSERT INTO AnalyticsReport (report_id, created_by_user_id, report_type, title, description, period_start, period_end, report_data, file_path, generated_at, created_at) VALUES
(1, 2, '週次設備稼働レポート', '2024年3月第2週 設備稼働状況分析レポート', '第1〜第3製造ラインの週次稼働状況、OEE分析、課題と改善提案を含む包括的なレポート', '2024-03-11 00:00:00', '2024-03-17 23:59:59', '{"summary": {"total_oee": 78.5, "availability": 91.2, "performance": 88.7, "quality": 96.8}, "equipment_performance": [{"equipment_id": 1, "oee": 79.0}, {"equipment_id": 2, "oee": 77.3}], "issues": ["CNCフライス盤#1高温異常", "研削盤#1故障予兆"], "recommendations": ["主軸冷却システム強化", "予知保全計画前倒し実施"]}', '/reports/weekly/2024_W11_equipment_performance.pdf', '2024-03-15 18:00:00', '2024-03-15 18:00:00'),
(2, 10, '品質分析レポート', '2024年3月 品質指標分析レポート', '製品品質の月次分析、不良率推移、品質改善効果の評価レポート', '2024-03-01 00:00:00', '2024-03-14 23:59:59', '{"quality_summary": {"overall_yield": 96.2, "defect_rate": 3.8, "customer_complaints": 2}, "line_performance": [{"line": "第1製造ライン", "yield": 97.1}, {"line": "第2製造ライン", "yield": 95.8}, {"line": "第3製造ライン", "yield": 95.7}], "improvement_actions": ["温度管理強化", "工具寿命管理改善"]}', '/reports/quality/2024_03_quality_analysis.pdf', '2024-03-14 16:30:00', '2024-03-14 16:30:00'),
(3, 4, '保全実績レポート', '2024年2月 保全作業実績レポート', '月次保全作業の実績、コスト分析、効果測定レポート', '2024-02-01 00:00:00', '2024-02-29 23:59:59', '{"maintenance_summary": {"total_works": 15, "planned_works": 12, "emergency_works": 3, "total_cost": 125000}, "equipment_reliability": {"mtbf_improvement": 8.5, "mttr_reduction": 15.2}, "cost_analysis": {"parts_cost": 75000, "labor_cost": 50000}, "recommendations": ["予知保全拡大", "部品在庫最適化"]}', '/reports/maintenance/2024_02_maintenance_summary.pdf', '2024-03-01 09:00:00', '2024-03-01 09:00:00'),
(4, 2, 'エネルギー消費レポート', '2024年3月第1週 エネルギー使用量分析', '工場全体のエネルギー消費分析、省エネ効果測定、改善提案レポート', '2024-03-04 00:00:00', '2024-03-10 23:59:59', '{"energy_summary": {"total_consumption": 12500, "electricity": 10200, "gas": 2300}, "efficiency_metrics": {"energy_per_unit": 2.8, "baseline_comparison": -5.2}, "equipment_consumption": [{"equipment": "CNC設備", "consumption": 4200}, {"equipment": "ユーティリティ", "consumption": 3800}], "savings_opportunities": ["待機時電力削減", "高効率モーター導入"]}', '/reports/energy/2024_W10_energy_analysis.pdf', '2024-03-11 10:30:00', '2024-03-11 10:30:00'),
(5, 1, 'AI予測精度レポート', '2024年2月 AI予測モデル性能評価レポート', '各種AI予測モデルの精度評価、改善提案、モデル更新計画レポート', '2024-02-01 00:00:00', '2024-02-29 23:59:59', '{"model_performance": [{"model": "温度予測", "accuracy": 92.5, "improvement": 2.1}, {"model": "故障予測", "accuracy": 87.8, "improvement": 4.3}], "prediction_results": {"true_positives": 18, "false_positives": 3, "false_negatives": 2}, "model_updates": ["データセット拡張", "ハイパーパラメータ調整"], "business_impact": {"downtime_reduction": 12.5, "maintenance_cost_saving": 8.3}}', '/reports/ai/2024_02_ai_model_evaluation.pdf', '2024-03-01 14:00:00', '2024-03-01 14:00:00');